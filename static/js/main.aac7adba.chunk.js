(this["webpackJsonpmarvel-characters"]=this["webpackJsonpmarvel-characters"]||[]).push([[0],{103:function(e,a,t){e.exports=t.p+"static/media/logo.288f7061.svg"},108:function(e,a,t){e.exports={error:"styles_error__2ugKv"}},109:function(e,a,t){e.exports={page:"styles_page__2WJtD"}},110:function(e,a,t){e.exports={content:"styles_content__349yX"}},113:function(e,a,t){e.exports={page:"styles_page__LRN7O"}},114:function(e,a,t){e.exports={content:"styles_content__2ApMr"}},125:function(e,a,t){e.exports=t(165)},143:function(e,a,t){},165:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(8),s=t.n(r),l=t(216),i=t(15),o=t(48),d=t(100),m=t.n(d),u=t(41),p={page:1,limit:48};var _=t(46),f=[];var h=Object(o.b)({system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"UPDATE_PAGE":return Object(u.a)({},e,{page:a.payload});default:return e}},characters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FETCH_CHARACTERS":return a.payload;case"LOAD_MORE_CHARACTERS":return[].concat(Object(_.a)(e),Object(_.a)(a.payload));case"FETCH_CHARACTER_SERIES":var t=Object(_.a)(e),n=t.findIndex((function(e){return e.id===a.payload.characterId}));return t[n].series=Object(_.a)(a.payload.series),t;case"EDIT_CHARACTER":var c=Object(_.a)(e),r=c.findIndex((function(e){return e.id===a.payload.id}));return a.payload.series=c[r].series,c[r]=Object(u.a)({},c[r],{},a.payload),c;default:return e}}}),E=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(a){return}}(),b=Object(o.c)(h,E);b.subscribe(m()((function(){!function(e){try{var a=JSON.stringify(e);localStorage.setItem("state",a)}catch(t){}}(b.getState())}),1e3));var g=b,v=t(40),y=t(30),N=(t(143),t(115)),O=t(58),j=t(18),C=t(59),x=t.n(C);var S=t(102),I=t.n(S),k=function(){var e=Date.now();return"ts=".concat(e,"&apikey=").concat("62311e4f5bd3a5949ec639e8b6e8e086","&hash=").concat(I()(e+"50c31b113a4edcdab89a87f29d197aada59223a762311e4f5bd3a5949ec639e8b6e8e086"))},A=t(201),T=t(205),B=t(219),R=t(206),H=t(107),F=t.n(H),P=t(44),L=t.n(P),D=t(103),w=t.n(D),G=function(e){var a=e.doSearch,t=e.searchTerm,r=Object(n.useState)(t),s=Object(j.a)(r,2),l=s[0],i=s[1];return c.a.createElement(A.a,{"data-testid":"search-bar",className:L.a.searchBar},c.a.createElement(T.a,{className:L.a.container},c.a.createElement("img",{className:L.a.logo,src:w.a,alt:"Logo Marvel"}),c.a.createElement("div",{className:L.a.searchContainer},c.a.createElement(B.a,{className:L.a.input,placeholder:"Pesquisar personagem...",defaultValue:l,inputProps:{onKeyPress:function(e){return function(e){"Enter"===e.key&&a(l)}(e)}},onChange:function(e){return i(e.currentTarget.value)}}),c.a.createElement(R.a,{"aria-label":"pesquisar","data-testid":"search-button",onClick:function(e){e.preventDefault(),a(l)}},c.a.createElement(F.a,null)))))},Q=t(77),V=t.n(Q),J=function(e){var a=e.charactersCardList;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:V.a.navbar}),c.a.createElement("section",{"data-testid":"cards-container",className:V.a.content},a))},W=t(78),M=t.n(W),z=t(207),K=t(208),U=t(209),q=t(210),Y=t(166),Z=t(45),X=t.n(Z),$=function(e){var a=e.className,t=void 0===a?"":a,n=e.title,r=e.image,s=e.ariaLabel,l=e.onClick,i="".concat(X.a.card," ").concat(t);return c.a.createElement(z.a,{component:"li",className:i},c.a.createElement(K.a,{className:X.a.actionArea,onClick:l},c.a.createElement(U.a,{className:X.a.image,image:r,title:s,"aria-label":s,component:"div"}),c.a.createElement(q.a,{className:X.a.content},c.a.createElement(Y.a,{className:X.a.name,variant:"caption",component:"h2"},n))))};var ee=function(e){var a=e.className,t=void 0===a?"":a,n=e.cards,r=e.ariaLabel,s=e.testId,l=e.onClick,i="".concat(M.a.content," ").concat(t);return c.a.createElement("ul",{"data-testid":"cards-list-".concat(s),className:i,"aria-label":r},n.length?n.map((function(e){return c.a.createElement($,{key:e.id,title:e.title,image:e.image,ariaLabel:"card",onClick:function(){return l(e.id,e.title)}})})):c.a.createElement(Y.a,{className:M.a.noCharacters,component:"li",variant:"caption"},"Nenhum personagem encontrado."))},ae=t(53),te=t.n(ae),ne=function(){var e="".concat(te.a.loader);return c.a.createElement("div",{"data-testid":"loader",className:e},c.a.createElement(Y.a,{component:"h1",variant:"h5"},"Carregando",c.a.createElement("span",{className:te.a.dot},"."),c.a.createElement("span",{className:te.a.dot},"."),c.a.createElement("span",{className:te.a.dot},".")))},ce=t(108),re=t.n(ce),se=function(){return c.a.createElement("div",{"data-testid":"error-message",className:re.a.error},c.a.createElement(Y.a,{component:"h1",variant:"h5"},"Algo deu errado!"))},le=function(){var e=new URLSearchParams(Object(y.h)().search),a=Object(y.g)(),t=null!==e.get("search")?String(e.get("search")):"",r=function(e,a){var t=Object(n.useState)({status:"init"}),c=Object(j.a)(t,2),r=c[0],s=c[1],l=Object(i.b)();return Object(n.useEffect)((function(){var t=!0;if(a){var n=e?"nameStartsWith=".concat(e):"";t&&s({status:"loading"}),x.a.get("".concat("https://gateway.marvel.com:443/v1/public/","characters?").concat(n,"&limit=48&").concat(k())).then((function(e){var a;t&&(l((a=e.data.data,{type:"FETCH_CHARACTERS",payload:a.results.map((function(e){return{id:e.id,name:e.name,description:e.description,image:"".concat(e.thumbnail.path,".").concat(e.thumbnail.extension),series:[]}}))})),s({status:"loaded"}))})).catch((function(e){t&&s({status:"error",error:e})}))}else t&&s({status:"loaded"});return function(){t=!1}}),[l,e,a]),r}(t,null===e.get("reload")||"true"===e.get("reload")),s=Object(i.c)((function(e){return e.characters}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(G,{searchTerm:t,doSearch:function(e){a.push("/?search=".concat(e))}}),"loading"===r.status&&c.a.createElement(ne,null),"loaded"===r.status&&c.a.createElement(J,{charactersCardList:c.a.createElement(ee,{cards:s.map((function(e){var a=e.name,t=Object(N.a)(e,["name"]);return Object(u.a)({title:a},t)})),onClick:function(e,t){a.push("/characters/".concat(e,"/").concat(Object(O.slugify)(t),"/details"))},testId:"characters",ariaLabel:"conjunto de cards de personagens"})}),"error"===r.status&&c.a.createElement(se,null))},ie=t(109),oe=t.n(ie),de=t(110),me=t.n(de),ue=function(e){var a=e.detailsHeader,t=e.detailsBody;return c.a.createElement("section",{className:me.a.content},a,t)},pe=t(28),_e=t.n(pe),fe=t(79),he=t.n(fe),Ee=t(111),be=t.n(Ee),ge=t(211),ve=t(38),ye=t.n(ve),Ne=function(e){var a=e.className,t=void 0===a?"":a,r=e.series,s="".concat(t),l=Object(n.useState)(!1),i=Object(j.a)(l,2),o=i[0],d=i[1];return c.a.createElement(z.a,{component:"li",className:s},c.a.createElement("div",{className:ye.a.header},c.a.createElement(U.a,{className:ye.a.img,image:r.image,title:"Imagem da s\xe9rie ".concat(r.title)}),c.a.createElement(Y.a,{className:ye.a.title,variant:"caption",component:"h2"},r.title),c.a.createElement(R.a,{className:"".concat(ye.a.expand," ").concat(o?ye.a.onExpand:""),"aria-expanded":o,"aria-label":"Mostrar mais","data-testid":"expand-more-button",onClick:function(){d(!o)}},c.a.createElement(be.a,null))),c.a.createElement(ge.a,{in:o,timeout:"auto",unmountOnExit:!0},c.a.createElement(q.a,{className:ye.a.details},c.a.createElement(Y.a,null,"Detalhes sobre a s\xe9rie"))))},Oe=function(e){var a=e.className,t=void 0===a?"":a,n=e.seriesArray,r="".concat(he.a.content," ").concat(t);return c.a.createElement("ul",{className:r,"aria-label":"conjunto de cards de s\xe9ries","data-testid":"card-list-series"},n.length?n.map((function(e){return c.a.createElement(Ne,{key:e.id,series:e})})):c.a.createElement(Y.a,{className:he.a.noSeries,component:"li",variant:"caption"},"Nenhuma s\xe9rie encontrada"))},je=function(e){var a=e.character,t=e.isLoading;return c.a.createElement("dl",{className:_e.a.content},c.a.createElement("div",{className:_e.a.infoGroup},c.a.createElement(Y.a,{id:"label-nome",className:_e.a.detailTitle,variant:"subtitle1",component:"dt"},"Nome:"),c.a.createElement(Y.a,{className:_e.a.detailInfo,variant:"subtitle1",component:"dd"},a.name)),""!==a.description&&c.a.createElement("div",{className:_e.a.infoGroup},c.a.createElement(Y.a,{className:_e.a.detailTitle,variant:"body2",component:"dt"},"Descri\xe7\xe3o:"),c.a.createElement(Y.a,{className:_e.a.detailInfo,variant:"body2",component:"dd"},a.description)),c.a.createElement(Y.a,{className:_e.a.text,variant:"body2",component:"dt"},"S\xe9ries:"),c.a.createElement("dd",null,t?c.a.createElement(ne,null):c.a.createElement(Oe,{seriesArray:a.series})))},Ce=t(63),xe=t.n(Ce),Se=t(112),Ie=t.n(Se),ke=t(67),Ae=t.n(ke),Te=function(e){var a=e.character,t=e.handleNavigateBack,n=e.handleEdit;return c.a.createElement("div",{className:Ae.a.header,style:{backgroundImage:"url(".concat(a.image,")")},"aria-label":"Imagem do personagem ".concat(a.name)},c.a.createElement(R.a,{className:Ae.a.navigateBefore,onClick:t,"data-testid":"navigate-back-button","aria-label":"voltar para p\xe1gina inicial"},c.a.createElement(xe.a,null)),c.a.createElement(R.a,{className:Ae.a.editAttributes,onClick:n,"data-testid":"edit-button","aria-label":"editar personagem"},c.a.createElement(Ie.a,null)))},Be=function(){var e=Object(y.g)(),a=Object(y.i)(),t=parseInt(a.characterId),r=Object(i.c)((function(e){return e.characters.find((function(e){return e.id===t}))})),s=function(e){var a=Object(i.b)(),t=Object(n.useState)({status:"init"}),c=Object(j.a)(t,2),r=c[0],s=c[1];return Object(n.useEffect)((function(){var t=!0;return e&&0===e.series.length?(t&&s({status:"loading"}),x.a.get("".concat("https://gateway.marvel.com:443/v1/public/","characters/").concat(e.id,"/series?limit=20&").concat(k())).then((function(n){var c,r,l;t&&(a((c=e.id,l=n.data.data,r=l.results.map((function(e){return{id:e.id,title:e.title,image:"".concat(e.thumbnail.path,".").concat(e.thumbnail.extension)}})),{type:"FETCH_CHARACTER_SERIES",payload:{characterId:c,series:r}})),s({status:"loaded"}))})).catch((function(e){t&&s({status:"error",error:e})}))):t&&s({status:"loaded"}),function(){t=!1}}),[e,a]),r}(r);if(!r)return c.a.createElement(y.a,{to:"/"});var l=function(){e.push("/?reload=false")},o=function(a,t){e.push("/characters/".concat(a,"/").concat(Object(O.slugify)(t),"/edit"))};return c.a.createElement("div",{className:oe.a.page},"loading"===s.status&&c.a.createElement(ue,{detailsHeader:c.a.createElement(Te,{handleNavigateBack:l,handleEdit:function(){return o(r.id,r.name)},character:r}),detailsBody:c.a.createElement(je,{isLoading:!0,character:r})}),"loaded"===s.status&&c.a.createElement(ue,{detailsHeader:c.a.createElement(Te,{handleNavigateBack:l,handleEdit:function(){return o(r.id,r.name)},character:r}),detailsBody:c.a.createElement(je,{isLoading:!1,character:r})}),"error"===s.status&&c.a.createElement(se,null))},Re=t(113),He=t.n(Re),Fe=t(114),Pe=t.n(Fe),Le=function(e){var a=e.editHero,t=e.inputFields;return c.a.createElement("section",{className:Pe.a.content},a,t)},De=t(80),we=t.n(De),Ge=function(e){var a=e.className,t=void 0===a?"":a,n=e.character,r=e.handleNavigateBack,s="".concat(we.a.header," ").concat(t);return c.a.createElement("div",{className:s,style:{backgroundImage:"url(".concat(n.image,")")},"aria-label":"Imagem do personagem ".concat(n.name)},c.a.createElement(R.a,{className:we.a.navigateBefore,onClick:r,"data-testid":"navigate-back-button","aria-label":"voltar para detalhes do personagem"},c.a.createElement(xe.a,null)))},Qe=t(215),Ve=t(212),Je=t(218),We=t(213),Me=t(214),ze=t(39),Ke=t.n(ze),Ue=function(e){var a=e.className,t=void 0===a?"":a,r=e.character,s="".concat(Ke.a.fields," ").concat(t),l=Object(i.b)(),o=Object(n.useState)(r.name),d=Object(j.a)(o,2),m=d[0],u=d[1],p=Object(n.useState)(r.image),_=Object(j.a)(p,2),f=_[0],h=_[1],E=Object(n.useState)(r.description),b=Object(j.a)(E,2),g=b[0],v=b[1],y=Object(n.useState)(!1),N=Object(j.a)(y,2),O=N[0],C=N[1],x=function(){C(!1)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{className:s},c.a.createElement(Qe.a,{className:Ke.a.input,disabled:!0,id:"character-id",inputProps:{"data-testid":"character-id"},label:"ID do Personagem",defaultValue:r.id}),c.a.createElement(Qe.a,{variant:"filled",className:Ke.a.input,id:"character-name",inputProps:{"data-testid":"character-name"},label:"Nome do Personagem",defaultValue:r.name,onChange:function(e){return u(e.target.value)}}),c.a.createElement(Qe.a,{variant:"filled",className:Ke.a.input,id:"character-image",inputProps:{"data-testid":"character-image"},label:"Imagem do Personagem",defaultValue:r.image,onChange:function(e){return h(e.target.value)}}),c.a.createElement(Qe.a,{variant:"filled",multiline:!0,rows:4,className:Ke.a.input,id:"character-description",inputProps:{"data-testid":"character-description"},label:"Descri\xe7\xe3o do Personagem",defaultValue:r.description,onChange:function(e){return v(e.target.value)}}),c.a.createElement(Ve.a,{className:Ke.a.button,onClick:function(){l(function(e){return{type:"EDIT_CHARACTER",payload:e}}({id:r.id,name:m,image:f,description:g,series:[]})),C(!0)}},"Salvar")),c.a.createElement(Je.a,{onClose:x,"aria-labelledby":"save-success-dialog",open:O},c.a.createElement(We.a,{id:"save-success-dialog"},"Salvo com sucesso!"),c.a.createElement(Me.a,null,c.a.createElement(Ve.a,{autoFocus:!0,onClick:x,color:"primary"},"Ok"))))},qe=function(){var e=Object(y.g)(),a=Object(y.i)(),t=parseInt(a.characterId),n=Object(i.c)((function(e){return e.characters.find((function(e){return e.id===t}))}));return n?c.a.createElement("div",{className:He.a.page},c.a.createElement(Le,{editHero:c.a.createElement(Ge,{character:n,handleNavigateBack:function(){return a=n.id,t=n.name,void e.push("/characters/".concat(a,"/").concat(t,"/details"));var a,t}}),inputFields:c.a.createElement(Ue,{character:n})})):c.a.createElement(y.a,{to:"/"})},Ye=function(){return c.a.createElement(v.a,null,c.a.createElement(y.d,null,c.a.createElement(y.b,{exact:!0,path:"/",component:le}),c.a.createElement(y.b,{path:"/characters/:characterId/:characterName/details",component:Be}),c.a.createElement(y.b,{path:"/characters/:characterId/:characterName/edit",component:qe}),c.a.createElement(y.b,{path:"*"},c.a.createElement(y.a,{to:"/"}))))};s.a.render(c.a.createElement(l.b,{injectFirst:!0},c.a.createElement(i.a,{store:g},c.a.createElement(Ye,null))),document.getElementById("root"))},28:function(e,a,t){e.exports={content:"styles_content__ncP-I",infoGroup:"styles_infoGroup__3xHBA",detailTitle:"styles_detailTitle__36Ofv",detailInfo:"styles_detailInfo__2se1d",text:"styles_text__3EG1U"}},38:function(e,a,t){e.exports={header:"styles_header__1m9u0",img:"styles_img__1q2QQ",title:"styles_title__mfQwQ",expand:"styles_expand__1W7Oe",onExpand:"styles_onExpand__1Cliz",details:"styles_details__-DMYB"}},39:function(e,a,t){e.exports={fields:"styles_fields__2NzBd",button:"styles_button__3mnol"}},44:function(e,a,t){e.exports={searchBar:"styles_searchBar__3a4V2",container:"styles_container__Qbp9k",logo:"styles_logo___m5Kp",searchContainer:"styles_searchContainer__32VCF"}},45:function(e,a,t){e.exports={card:"styles_card__1lzFE",actionArea:"styles_actionArea__3vblF",image:"styles_image__3HOWS",content:"styles_content__2GR6A",name:"styles_name__2FjsQ"}},53:function(e,a,t){e.exports={loader:"styles_loader__eP1Tx",dot:"styles_dot__1ZJh2",blink:"styles_blink___SYo5"}},67:function(e,a,t){e.exports={header:"styles_header__195el",navigateBefore:"styles_navigateBefore__cZv8H",editAttributes:"styles_editAttributes__12-SQ"}},77:function(e,a,t){e.exports={content:"styles_content__LWNUG"}},78:function(e,a,t){e.exports={content:"styles_content__3i63O",noCharacters:"styles_noCharacters__3dzQF"}},79:function(e,a,t){e.exports={content:"styles_content__2j_36",noSeries:"styles_noSeries__ttk4m"}},80:function(e,a,t){e.exports={header:"styles_header__3V7ED",navigateBefore:"styles_navigateBefore__bWhvo",editAttributes:"styles_editAttributes__1tc_f",detailTitle:"styles_detailTitle__1L-fx",detailInfo:"styles_detailInfo__eGT-c",text:"styles_text__28Kly"}}},[[125,1,2]]]);
//# sourceMappingURL=main.aac7adba.chunk.js.map